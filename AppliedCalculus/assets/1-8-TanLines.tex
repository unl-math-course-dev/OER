\documentclass[tikz]{standalone}
\usepackage{amsmath,amssymb}
\usepackage{pgfplots,multicol}

\pgfplotsset{compat=1.13}
\usepgfplotslibrary{fillbetween}

\begin{document}

\foreach \z [count=\xx, evaluate=\z as \mark using (\z)] in {1., 1.25, 1.5, 1.75, 2., 2.25, 2.5, 2.75, 3., 3.25, 3.5, 3.75, 4.,4.25, 4.5, 4.75, 5., 5.25, 5.5, 5.75, 6., 6.25, 6.5, 6.75, 7., 7.25,7.5, 7.75, 8., 8.25, 8.5, 8.75, 9., 9.25, 9.5, 9.75, 10., 10.25,10.5, 10.75, 11., 11.25, 11.5, 11.75, 12., 12.25, 12.5}{
 \begin{tikzpicture}[scale=1.5,	declare function={ f(\x) =1/10*(\x+2)*(\x-2)*(\x-2)+1; g(\x)=1/10*(\x-2)*(\x-2)+1/5*(\x-2)*(2+\x);
                 }]

    \draw[->,thick] (-0.5,0) -- (4,0) node[right] {$x$};
    \draw[->,thick] (0,-0.5) -- (0,4) node[above] {$y$};
\foreach \x in {3} \draw (\x,0.1) -- (\x, -0.1) node[below] {$a$};
 \draw[fill=red] (3,{f(3)}) circle (.5ex) node[above,rotate=45] {($a$,$f(a)$)};
 

\draw[-,color=blue,smooth,domain=-0.5:4,thick] plot(\x,{f(\x)});
\draw[-,color=green,smooth,domain=2:4,thick] plot(\x,{g(3)*(\x-3)+f(3)});


 \draw[fill=red] (3,0.5) node[below] {$y=f'(a)(x-a)+f(a)$};
 
  \draw[fill=red] (4,{f(4)}) node[left] {$y=f(x)$};


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\draw[-,thick] (3-1/\z,{f(3)-1/\z}) -- (3+1/\z,{f(3)-1/\z}) -- (3+1/\z,{f(3)+1/\z})--(3-1/\z,{f(3)+1/\z}) -- (3-1/\z,{f(3)-1/\z});
\draw[dashed] (3-1/\z,{f(3)-1/\z}) --(5,0) ;
\draw[dashed] (3-1/\z,{f(3)+1/\z}) --(5,4) ;
\draw[dashed] (3+1/\z,{f(3)-1/\z}) --(9,0) ;
\draw[dashed] (3+1/\z,{f(3)+1/\z}) --(9,4) ;

\draw[-,thick] (10,5); 
\draw[-,thick, fill=white] (5,0) -- (9,0) -- (9,4)--(5,4) -- (5,0);
    

%\draw[-,color=blue,smooth,domain=6:9,thick] plot(\x-1,{f(\x-5)});

\draw[-,color=blue,smooth,domain=3-1/\z:3+1/\z,thick] plot({2*\z*(\x+1/\z-3)+5},{2*\z*(f(\x)-f(3))+f(3)+0.5});

\draw[-,color=green,smooth,domain=5:9,thick] plot(\x,{g(3)*(\x-3-5)+g(3)+2});
 \draw[fill=red] (7,{2}) circle (.5ex);
 
 
 
\end{tikzpicture}}

	
\end{document}
